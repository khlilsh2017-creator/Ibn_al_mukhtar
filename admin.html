<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">

  <style>
    :root {
      --primary: #c6a047;
      --bg-color: #f8f9fa;
      --card-bg: #ffffff;
      --text-color: #333;
      --danger: #ff4d4d;
    }

    * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

    body {
      font-family: 'Tajawal', sans-serif;
      background: var(--bg-color);
      color: var(--text-color);
      margin: 0; padding: 0;
      padding-top: 70px; /* Ù…Ø³Ø§Ø­Ø© Ù„Ù„Ù‡ÙŠØ¯Ø± */
      padding-bottom: 40px;
    }

    /* ğŸ”¥ Ø§Ù„Ù‡ÙŠØ¯Ø± */
    header {
      position: fixed; top: 0; left: 0; right: 0;
      height: 60px; background: #fff;
      display: flex; align-items: center; justify-content: space-between;
      padding: 0 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      z-index: 100;
    }
    header h1 { margin: 0; font-size: 18px; font-weight: 800; color: var(--primary); }
    .home-link {
      text-decoration: none; font-size: 14px; font-weight: bold; color: #333;
      background: #eee; padding: 6px 12px; border-radius: 20px;
    }

    /* ğŸ”¥ Ø§Ù„ÙƒØ±ÙˆØª ÙˆØ§Ù„Ø­Ø§ÙˆÙŠØ§Øª */
    .container { max-width: 600px; margin: 0 auto; padding: 16px; }

    .card {
      background: var(--card-bg);
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.03);
      margin-bottom: 24px;
      border: 1px solid #f0f0f0;
    }

    h2 { margin-top: 0; font-size: 16px; color: var(--primary); border-bottom: 2px solid #f0f0f0; padding-bottom: 10px; margin-bottom: 15px; }

    /* ğŸ”¥ Ø§Ù„Ø­Ù‚ÙˆÙ„ */
    label { display: block; margin-bottom: 8px; font-weight: 600; font-size: 13px; color: #555; }
    
    input, textarea, select {
      width: 100%; padding: 12px; border-radius: 12px;
      border: 1px solid #eee; background: #f9f9f9;
      font-family: inherit; margin-bottom: 16px;
      transition: 0.3s; font-size: 14px;
    }
    input:focus, textarea:focus, select:focus {
      border-color: var(--primary); background: #fff; outline: none;
    }
    textarea { height: 100px; resize: none; }

    /* ğŸ”¥ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ± */
    .upload-box {
      border: 2px dashed #ddd; border-radius: 12px;
      padding: 20px; text-align: center; cursor: pointer;
      margin-bottom: 16px; background: #fafafa;
      position: relative;
    }
    .upload-box:active { background: #eee; }
    .upload-icon { font-size: 24px; color: #aaa; margin-bottom: 5px; display: block; }
    .upload-text { font-size: 12px; color: #888; }
    input[type="file"] { display: none; }

    .thumbs { display: flex; gap: 8px; overflow-x: auto; padding-bottom: 10px; }
    .thumbs img {
      width: 60px; height: 60px; object-fit: cover;
      border-radius: 10px; border: 1px solid #eee;
      flex-shrink: 0;
    }

    /* ğŸ”¥ Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
    .btn-save {
      width: 100%; padding: 14px; background: var(--primary);
      color: #fff; border: none; border-radius: 12px;
      font-size: 16px; font-weight: bold; cursor: pointer;
      box-shadow: 0 4px 10px rgba(198,160,71,0.3);
    }
    .btn-save:active { transform: scale(0.98); background: #b08d3b; }

    /* ğŸ”¥ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª */
    .product-row {
      display: flex; align-items: center; justify-content: space-between;
      background: #fff; padding: 10px; margin-bottom: 10px;
      border-radius: 12px; border: 1px solid #f0f0f0;
    }
    .p-info { display: flex; align-items: center; gap: 10px; }
    .p-img { width: 40px; height: 40px; border-radius: 8px; object-fit: cover; background: #eee; }
    .p-name { font-size: 14px; font-weight: bold; color: #333; }
    .p-price { font-size: 12px; color: var(--primary); }
    
    .btn-delete {
      background: #ffe5e5; color: var(--danger);
      border: none; padding: 8px 12px; border-radius: 8px;
      font-size: 12px; font-weight: bold; cursor: pointer;
    }
    
    /* Toast */
    .toast {
      position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
      background: rgba(0,0,0,0.8); color: #fff; padding: 10px 20px;
      border-radius: 30px; font-size: 13px; z-index: 200;
      opacity: 0; visibility: hidden; transition: 0.3s;
    }
    .toast.show { opacity: 1; visibility: visible; bottom: 40px; }

  </style>
</head>
<body>

<header>
  <h1>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª âš™ï¸</h1>
  <a href="index.html" class="home-link">Ø§Ù„Ù…ØªØ¬Ø± ğŸ </a>
</header>

<div class="container">

  <div class="card">
    <h2>â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h2>

    <label>Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</label>
    <input type="text" id="name" placeholder="Ù…Ø«Ø§Ù„: Ø®Ù„Ø§Ø· ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ">

    <label>Ø§Ù„Ø³Ø¹Ø±</label>
    <input type="text" id="price" placeholder="Ù…Ø«Ø§Ù„: 5000 Ø±.ÙŠ">

    <label>Ø§Ù„ØªØµÙ†ÙŠÙ</label>
    <select id="category">
      <option value="Ø£Ø¯ÙˆØ§Øª Ù…Ù†Ø²Ù„ÙŠØ©">Ø£Ø¯ÙˆØ§Øª Ù…Ù†Ø²Ù„ÙŠØ©</option>
      <option value="Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª">Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª</option>
    </select>

    <label>ØµÙˆØ± Ø§Ù„Ù…Ù†ØªØ¬</label>
    <div class="upload-box" onclick="document.getElementById('imagesInput').click()">
      <span class="upload-icon">ğŸ“·</span>
      <span class="upload-text">Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØµÙˆØ±</span>
    </div>
    <input type="file" id="imagesInput" accept="image/*" multiple>

    <div class="thumbs" id="previewBox"></div>

    <label>Ø§Ù„ÙˆØµÙ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
    <textarea id="desc" placeholder="Ø§ÙƒØªØ¨ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬ Ù‡Ù†Ø§..."></textarea>

    <button class="btn-save" onclick="saveProduct()">Ø­ÙØ¸ ÙˆÙ†Ø´Ø± Ø§Ù„Ù…Ù†ØªØ¬</button>
  </div>

  <div class="card">
    <h2>ğŸ“¦ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø®Ø²Ù†Ø© (<span id="count">0</span>)</h2>
    <div id="productsList"></div>
  </div>

</div>

<div id="toast" class="toast">âœ… ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¨Ù†Ø¬Ø§Ø­</div>

<script>
  let selectedImages = [];

  // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ØµÙˆØ± ÙˆØ¹Ø±Ø¶Ù‡Ø§
  document.getElementById("imagesInput").addEventListener("change", function () {
    selectedImages = [];
    document.getElementById("previewBox").innerHTML = "";
    const files = [...this.files];
    
    if(files.length > 0) {
        document.querySelector('.upload-text').innerText = `ØªÙ… Ø§Ø®ØªÙŠØ§Ø± ${files.length} ØµÙˆØ±`;
    }

    files.forEach(file => {
      const reader = new FileReader();
      reader.onload = e => {
        selectedImages.push(e.target.result);
        const img = document.createElement("img");
        img.src = e.target.result;
        document.getElementById("previewBox").appendChild(img);
      };
      reader.readAsDataURL(file);
    });
  });

  function getProducts() {
    return JSON.parse(localStorage.getItem("products")) || [];
  }

  function saveProducts(list) {
    localStorage.setItem("products", JSON.stringify(list));
    renderProducts();
  }

  function saveProduct() {
    const name = document.getElementById("name").value.trim();
    const price = document.getElementById("price").value.trim();
    const description = document.getElementById("desc").value.trim(); // ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ù…ÙØªØ§Ø­ Ù„ÙŠØªÙˆØ§ÙÙ‚ Ù…Ø¹ ØµÙØ­Ø© Ø§Ù„Ù…Ù†ØªØ¬
    const category = document.getElementById("category").value;

    if (!name || !price || selectedImages.length === 0) {
      showToast("âŒ ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„ØµÙˆØ±");
      return;
    }

    const products = getProducts();

    const newProduct = {
      id: Date.now(),
      name,
      price,
      description, // Ø­ÙØ¸ Ø§Ù„ÙˆØµÙ Ø¨Ø§Ø³Ù… description
      category,
      image: selectedImages
    };

    products.push(newProduct);
    saveProducts(products);
    showToast("âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­!");

    // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
    document.getElementById("name").value = "";
    document.getElementById("price").value = "";
    document.getElementById("desc").value = "";
    document.getElementById("imagesInput").value = "";
    document.querySelector('.upload-text').innerText = "Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØµÙˆØ±";
    document.getElementById("previewBox").innerHTML = "";
    selectedImages = [];
  }

  function deleteProduct(id) {
    if(!confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ØŸ")) return;
    let products = getProducts();
    products = products.filter(p => p.id !== id);
    saveProducts(products);
    showToast("ğŸ—‘ï¸ ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬");
  }

  function renderProducts() {
    const box = document.getElementById("productsList");
    const list = getProducts();
    document.getElementById("count").textContent = list.length;

    box.innerHTML = "";
    
    if(list.length === 0) {
        box.innerHTML = "<div style='text-align:center;color:#999;font-size:13px;'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹</div>";
        return;
    }

    list.forEach(p => {
      // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ ØµÙˆØ±Ø© Ù„Ù„Ø¹Ø±Ø¶
      const thumb = Array.isArray(p.image) && p.image.length > 0 ? p.image[0] : '';
      
      const row = document.createElement("div");
      row.className = "product-row";
      row.innerHTML = `
        <div class="p-info">
          <img src="${thumb}" class="p-img">
          <div>
            <div class="p-name">${p.name}</div>
            <div class="p-price">${p.price}</div>
          </div>
        </div>
        <button class="btn-delete" onclick="deleteProduct(${p.id})">Ø­Ø°Ù</button>
      `;
      box.appendChild(row);
    });
  }

  function showToast(msg) {
    const toast = document.getElementById("toast");
    toast.textContent = msg;
    toast.classList.add("show");
    setTimeout(() => toast.classList.remove("show"), 3000);
  }

  // ØªØ´ØºÙŠÙ„ Ø£ÙˆÙ„ÙŠ
  renderProducts();
</script>

</body>
</html>
